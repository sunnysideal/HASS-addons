# Default number of days of history to fetch (can be overridden per sensor)
history_days: 60

# Update interval in minutes (how often to retrain models)
update_interval: 5

# Default interval duration in minutes (can be overridden per sensor)
interval_duration: 30

# Default number of intervals to predict (can be overridden per sensor)
intervals_to_predict: 48

# Database settings (optional)
# Enable database storage to retain training data beyond HA history limits
database:
  enabled: false  # Set to true to enable database storage
  max_age: 730    # Maximum days to retain in database (default: 2 years)
  path: /config/neuralprophet.db  # Database file (stored in addon_configs folder)

# List of sensors to train and predict
sensors:
  # - training_entity_id: sensor.plum_econet300_weather_temp
  #   prediction_entity_id: sensor.weather_temp_prediction
  #   history_days: 730  # Override: use 2 years of data for this sensor
  #   interval_duration: 30  # 30-minute intervals
  #   intervals_to_predict: 48  # Predict 24 hours (48 * 30min)
  #   units: Â°C
  #   #regressors:  # Optional: additional sensors to use as predictors
  #   #  - sensor.outdoor_humidity
  #   #  - sensor.wind_speed
    
  # - training_entity_id: sensor.haos_sbfspot_sma_energy_lifetime
  #   prediction_entity_id: sensor.solar_power_prediction
  #   history_days: 720   # Use 2 years of solar data for seasonal patterns
  #   interval_duration: 30  # 30-minute intervals
  #   intervals_to_predict: 144  # Predict 72 hours (144 * 30min)
  #   units: "kWh"
  #   cumulative: true  # Set to true for energy meters that always increase
  #   regressors:

              
      # - entity_id: sensor.openweathermap_cloud_coverage
      #   type: sensor  # Regular sensor with history
      #   future_entity_id: weather.forecast_home
      #   future_entity_type: weather  # Use weather forecast attribute
      #   future_attribute: cloud_coverage  # Use forecast attribute for future values
      # - entity_id: sensor.openweathermap_uv_index
      #   type: sensor  # Regular sensor with history
      #   future_entity_id: weather.forecast_home
      #   future_entity_type: weather  # Use weather forecast attribute
      #   future_attribute: uv_index  # Use forecast attribute for future values
        

  - training_entity_id: sensor.haos_sbfspot_sma_energy_lifetime

    prediction_entity_id: sensor.solar_power_prediction_two
    history_days: 720   # Use 2 years of solar data for seasonal patterns
    interval_duration: 30  # 30-minute intervals
    intervals_to_predict: 144  # Predict 72 hours (144 * 30min)
    units: "kWh"
    cumulative: true  # Set to true for energy meters that always increase
    database: true  # Enable database storage for this sensor (overrides global setting)
    max_age: 1095  # Keep 3 years of data for this sensor (overrides global max_age)
    regressors:
      - entity_id: sensor.openweathermap_uv_index
        type: sensor  # Regular sensor with history
        future_entity_id: weather.forecast_home
        future_entity_type: weather  # Use weather forecast attribute
        future_attribute: uv_index  # Use forecast attribute for future values
      - entity_id: sun.azel
        type: calculated  # Calculated regressor, not from HA
        future: true  # Indicates future values should be calculated
  #       #latitude: 51.5074  # Example: London, replace with your lat
  #       #longitude: -0.1278 # Example: London, replace with your lon
  #       #elevation: 24      # Example: meters above sea level
        

  - training_entity_id: sensor.shellyemg3_dcb4d9ce52c0_energy_meter_0_total_active_energy
    prediction_entity_id: sensor.heat_pump_energy_prediction
    history_days: 720   # Use 2 years of solar data for seasonal patterns
    interval_duration: 30  # 30-minute intervals
    intervals_to_predict: 96  # Predict 48 hours (96 * 30min)
    units: "kWh"
    cumulative: true  # Set to true for energy meters that always increase
    database: true  # Enable database storage for this sensor (overrides global setting)
    max_age: 1095  # Keep 3 years of data for this sensor (overrides global max_age)
    regressors:
      - entity_id: sensor.gw1000a_pro_outdoor_temperature
        name: temp_lagged
        type: sensor  # Regular sensor with history
        future_entity_id: weather.forecast_home  # Weather entity for future values
        future_entity_type: weather  # Use weather forecast attribute
        future_attribute: temperature  # Attribute to use as future regressor
        n_lags: 10  # Use past 10 intervals as lagged regressors
      - entity_id: sensor.gw1000a_pro_outdoor_temperature
        name: temp_future
        type: sensor  # Regular sensor with history
        future_entity_id: weather.forecast_home  # Weather entity for future values
        future_entity_type: weather  # Use weather forecast attribute
        future_attribute: temperature  # Attribute to use as future regressor
                    

      - entity_id: sensor.openweathermap_uv_index
        type: sensor  # Regular sensor with history
        future_entity_id: weather.forecast_home
        future_entity_type: weather  # Use weather forecast attribute
        future_attribute: uv_index  # Use forecast attribute for future values

  - training_entity_id: sensor.ge_inverter_ch2423g299_consumption_total
    prediction_entity_id: sensor.household_energy_prediction
    history_days: 720   # Use 2 years of data for seasonal patterns
    interval_duration: 30  # 30-minute intervals
    intervals_to_predict: 96  # Predict 48 hours (96 * 30min)
    units: "kWh"
    cumulative: true  # Set to true for energy meters that always increase
    database: true  # Enable database storage for this sensor (overrides global setting)
    max_age: 1095  # Keep 3 years of data for this sensor (overrides global max_age)
    regressors:
      - entity_id: sensor.gw1000a_pro_outdoor_temperature
        type: sensor  # Regular sensor with history
        future_entity_id: weather.forecast_home  # Weather entity for future values
        future_entity_type: weather  # Use weather forecast attribute
        future_attribute: temperature  # Attribute to use as future regressor
        n_lags: 10  # Use past 10 intervals as lagged regressors
              


